<!DOCTYPE html>
<html lang="en" class="min-h-full h-full">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <%= csrf_meta_tag() %>
    <%= live_title_tag(assigns[:page_title] || "Exshome", suffix: " Â· Exshome") %>
    <link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/app.css")} />

    <script>
      const THEME_KEY = 'theme';
      window.Theme = {
        useTheme(value) {
          let selected = 'system';
          switch (value) {
            case 'light':
            case 'dark':
              localStorage.setItem(THEME_KEY, value);
              selected = value;
              break;
            default:
              localStorage.removeItem(THEME_KEY);
              break;
          }
          // [...document.getElementById('themeSelector').options].forEach(
          //     option => {
          //       option.selected = option.value === selected;
          //     }
          // );
          this.refreshTheme();
        },
        refreshTheme() {
          const theme = localStorage.getItem(THEME_KEY);
          if (theme === 'dark' || (!Boolean(theme) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
          } else {
            document.documentElement.classList.remove('dark')
          }
        }
      }

      window.Theme.useTheme(localStorage.theme);
    </script>
    <script
      defer
      phx-track-static
      type="text/javascript"
      src={Routes.static_path(@conn, "/assets/app.js")}
    >
    </script>
  </head>
  <body class="bg-white dark:bg-black overflow-hidden dark:text-gray-200 h-full">
    <%= @inner_content %>
  </body>
</html>
